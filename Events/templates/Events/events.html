{% extends 'base.html' %}

{% block Title %}
<title>赛事</title>
{% endblock %}

{% block content %}


{% block extracss %}
	<link href="/static/css/mix/reset.css" rel="stylesheet"/>
    <link href="/static/css/mix/style.css" rel="stylesheet"/>
{% endblock %}

<div class="container-fluid">
	<div class="row-fluid">
		<div class="span12">
	<div class="page-header">
        <h1 style="text-align: center">
          所有赛事 <small>共{{events_list.paginator.num_pages}}页</small>
        </h1>
	</div>	
	
        <div class="span12">	
		{% if request.session.auth > 0 %}
		  <button class="btn btn-default" onclick="location.href='/events/addevents'">添加赛事</button>
		{% endif %}
      </div>
			<div class="tabbable" id="tabs-30026">
				<ul class="nav nav-tabs">
					<li class="active" >
						<a href="#panel-146781" data-toggle="tab">网格</a>
					</li>
					<li>
						<a href="#panel-363798" data-toggle="tab">列表</a>
					</li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane active" id="panel-146781">		
        <div class="controls">
            <button type="button" class="control" data-filter="all">All</button>
            <button type="button" class="control" data-filter=".green">Greenasdfasdfasdfasdf</button>
            <button type="button" class="control" data-filter=".blue">Blue</button>
            <button type="button" class="control" data-filter=".pink">Pink</button>
            <button type="button" class="control" data-filter="none">None</button>
			<div class="checkbox-group-mix">
                <div class="checkbox">
                    <label class="checkbox-label">Green</label>
                    <input type="checkbox" value=".green"/>
                </div>

                <div class="checkbox">
                    <label class="checkbox-label">Blue</label>
                    <input type="checkbox" value=".blue"/>
                </div>

                <div class="checkbox">
                    <label class="checkbox-label">Pink</label>
                    <input type="checkbox" value=".pink"/>
                </div>
            </div>

            <button type="button" class="control" data-sort="default:asc">Asc</button>
            <button type="button" class="control" data-sort="default:desc">Desc</button>
        </div>

        <div class="container-mix">
            <div class="mix green"></div>
            <div class="mix green"></div>
            <div class="mix blue"></div>
            <div class="mix pink"></div>
            <div class="mix green"></div>
            <div class="mix blue"></div>
            <div class="mix pink"></div>
            <div class="mix blue"></div>

            <div class="gap"></div>
            <div class="gap"></div>
            <div class="gap"></div>
        </div>
					</div>
					<div class="tab-pane" id="panel-363798">
						<div class="container-fluid">
    <div class="row-fluid">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>
                        编号
                    </th>
                    <th>
                        项目
                    </th>
                    <th>
                        报名截止时间
                    </th>
                    <th>
                        比赛时间
                    </th>
                    <th>
                        状态
                    </th>
                </tr>
                </thead>
                <tbody>
                {% for line in events_list %}
                <tr class="{{line.s3}}" ondblclick="location.href='/events/{{line.id}}'">
                    <td>
                        {{line.id}}
                    </td>
                    <td onclick="location.href='/events/{{line.id}}'">
                        {{line.name}}
                    </td>
                    <td>
                        {{line.timeRegEnStr}}
                    </td>
                    <td>
                        {{line.timeEvnStStr}}
                    </td>
                    <td>
                        {{line.s2}}
                        {% if line.maxRegCnt == line.nowRegCnt %}
                        <font color="red">（报名已满）</font>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
                
            </table>
        </div>
    </div>
</div>

<nav style="text-align: center">
<ul class="pagination">
    {% if events_list.has_previous %}
        <li><a href="?page={{ events_list.previous_page_number }}">&laquo;</a></li>
    {% endif %}
    {% if events_list.number > 2 %}
        <li><a href="?page={{ events_list.number|add:"-2"}}">{{events_list.number|add:"-2"}}</a></li>
    {% endif %}
    {% if events_list.number > 1 %}
        <li><a href="?page={{ events_list.previous_page_number }}">{{events_list.number|add:"-1"}}</a></li>
    {% endif %}
        <li class="active"><a>{{events_list.number}}<span class="sr-only">(current)</span></a></li>
    {% if events_list.number < events_list.paginator.num_pages %}
        <li><a href="?page={{ events_list.next_page_number }}">{{events_list.number|add:"1"}}</a></li>
    {% endif %}
    {% if events_list.number < events_list.paginator.num_pages|add:"-1" %}
        <li><a href="?page={{ events_list.number|add:"2"}}">{{events_list.number|add:"2"}}</a></li>
    {% endif %}
    {% if events_list.has_next %}
        <li><a href="?page={{ events_list.next_page_number }}">&raquo;</a></li>
    {% endif %}
</ul>
</nav>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="/static/js/mixitup.min.js"></script>

        <script>
		var containerEl = document.querySelector('.container-mix');
		alert('asd');
            var checkboxGroup = document.querySelector('.checkbox-group-mix');
            var checkboxes = checkboxGroup.querySelectorAll('input[type="checkbox"]');

            var mixer = mixitup(containerEl);

            checkboxGroup.addEventListener('change', function() {
                var selectors = [];

                // Iterate through all checkboxes, pushing the
                // values of those that are checked into an array

                for (var i = 0; i < checkboxes.length; i++) {
                    var checkbox = checkboxes[i];

                    if (checkbox.checked) selectors.push(checkbox.value);
                }

                // If there are values in the array, join it into a string
                // using your desired logic, and send to the mixer's .filter()
                // method, otherwise filter by 'all'

                var selectorString = selectors.length > 0 ?
                    selectors.join(',') : // or '.' for AND logic
                    'all';
				alert(selectorString);
                mixer.filter(selectorString);
			});
        </script>



{% endblock %}

